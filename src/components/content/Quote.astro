---
interface Props {
    author?: string;
    source?: string;
    href?: string;
}

const { author, source, href } = Astro.props;

const Wrapper = href ? "a" : "div";
---

<Wrapper
    href={href}
    target={href ? "_blank" : undefined}
    rel={href ? "noopener noreferrer" : undefined}
    class:list={[
        "not-prose relative my-16 block no-underline",
        href && "cursor-pointer hover:opacity-80 transition-opacity",
    ]}
>
    <span
        class="quote-block relative block font-serif text-[24px] leading-[1.33] md:text-[30px] text-flexoki-tx [&_p]:font-serif [&_p]:font-medium [&_p]:leading-[inherit] [&_p]:mb-0"
    >
        <span
            class="absolute -left-3 text-flexoki-tx-2/90 select-none"
            style="font-family: Georgia;">"</span
        >
        <slot />
    </span>
    <style is:global>
        .quote-block p:last-child::after {
            content: '"';
            font-family: Georgia;
            color: var(--color-flexoki-tx-2);
            opacity: 0.9;
            margin-left: 2px;
        }
    </style>
    {
        author && (
            <div class="ml-auto mt-6 flex w-full items-center gap-3 md:w-[60%]">
                <div class="hidden h-px flex-grow bg-flexoki-tx-3/50 md:block" />
                <div class="flex flex-col md:ml-auto md:text-right">
                    <span class="text-[13px] font-medium leading-none text-flexoki-tx-2">
                        {author}
                        {source && (
                            <span class="mt-1 block text-flexoki-tx-3 md:mt-0 md:inline">
                                <span class="hidden md:inline-block">, </span>
                                {source}
                            </span>
                        )}
                    </span>
                </div>
            </div>
        )
    }
</Wrapper>
